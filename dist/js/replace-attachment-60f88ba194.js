let replaceAttachment=document.getElementById("replaceAttachment");if(replaceAttachment){let e=document.getElementById("newMediaFrame");document.getElementById("newAttachmentId");replaceAttachment.addEventListener("click",function(){var t;(t=wp.media.frames.file_frame=wp.media({title:"Remplacer le média",button:{text:"Choisir"},multiple:!1})).on("select",function(){attachment=t.state().get("selection").first().toJSON(),document.getElementById("newMediaImg").setAttribute("src",attachment.url),replaceAttachment.classList.add("hidden"),e.classList.remove("hidden")}),t.open()});let t=document.getElementById("submitNewAttachment");t&&t.addEventListener("click",function(){e.querySelector(".dashicons").classList.remove("dashicons-arrow-down-alt"),e.querySelector(".dashicons").classList.add("dashicons-update"),e.querySelector(".dashicons").classList.add("spin");let t=new URL(window.location.href).searchParams.get("attachment_id");var a=new Headers;a.append("X-WP-Nonce",wpApiSettings.nonce),fetch("/wp-json/woody/attachments/replace?search="+t+"&replace="+attachment.id,{headers:a}).then(t=>{document.getElementById("woodyMediapageslistTable").innerHTML="<h3>Remplacement en cours - Cette opération peut prendre quelques minutes.<br/>Rafraichissez la page pour afficher une liste à jour</h3>",e.classList.add("hidden")}).catch(e=>{console.error("Replace fetch: "+e)})});let a=document.getElementById("cancelNewAttachment");a&&a.addEventListener("click",function(){e.classList.add("hidden")})}