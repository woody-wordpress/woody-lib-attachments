let replaceAttachment=document.getElementById("replaceAttachment");if(replaceAttachment){let e=document.getElementById("newMediaFrame"),t=document.getElementById("newAttachmentId");replaceAttachment.addEventListener("click",function(){var t;(t=wp.media.frames.file_frame=wp.media({title:"Remplacer le média",button:{text:"Choisir"},multiple:!1})).on("select",function(){attachment=t.state().get("selection").first().toJSON(),document.getElementById("newMediaImg").setAttribute("src",attachment.url),replaceAttachment.classList.add("hidden"),e.classList.remove("hidden")}),t.open()});let n=document.getElementById("submitNewAttachment");n&&n.addEventListener("click",function(){let e=new URL(window.location.href).searchParams.get("attachment_id");var t=new Headers;t.append("X-WP-Nonce",wpApiSettings.nonce),fetch("/wp-json/woody/attachments/replace?search="+e+"&replace="+attachment.id,{headers:t}).then(e=>console.log(e)).catch(e=>{console.error("Replace fetch: "+e)}),document.getElementById("woodyMediapageslistTable").innerHTML="<h3>Remplacement en cours - Cette opération peut prendre quelques minutes</h3><p>Rafraichissez la page pour mettre la liste à jour</p>"});let a=document.getElementById("cancelNewAttachment");a&&a.addEventListener("click",function(){t.value="",e.classList.add("hidden")})}